<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>User Crud App</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"></link>
        <!-- For DataTables -->
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-info">
            <a class="navbar-brand" href="/">Node-TypeScript</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/users">Users</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="/users/add">Add New Users</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container">
                    <center><h2>List of Users</h2></center>
                    <button type="button" class="btn btn-info btn-lg"> <i class="fa fa-user"></i> Total User
                       <span class="badge"><%= users.length %></span>
                    </button>
                    <br/><br/>
                    <div class="table-responsive">
                      <table class="table table-hover table-striped" id="myTable">
                      <thead class = "thead-dark">
                        <tr>
                          <th>First Name</th>
                          <th>Last Name</th>
                          <th>Email</th>
                          <th>Phone</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                          <% for(var i=0; i<users.length; i++) {%>
                      <tr>
                        <td><%= users[i].fname %></td>
                        <td><%= users[i].lname %></td>
                        <td><%= users[i].email %></td>
                        <td><%= users[i].phone %></td>
                        <td>
                          <button type="button" class="update btn btn-success btn-lg" data-toggle="modal" data-target="#myModal" id="<%= users[i].email %>">
                            <i class="fa fa-edit"></i>
                          </button>
                          <button type="button" id="<%= users[i].email %>" class="delete btn btn-danger btn-lg" value="<%= users[i].email %>">
                            <i class="fa fa-trash"></i></button>
                        </td>
                      </tr>
                    <% } %>
                      </tbody>
                    </table>
            <!--  Modal Starts-->
            <div class="modal fade" id="myModal">
                <div class="modal-dialog">
                  <div class="modal-content">
              
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <h4 class="modal-title">User Edit</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
              
                    <!-- Modal body -->
                    <div class="modal-body">
                      <div class="container">
                <h2>Edit Data</h2>
                <form action="/update_user" method="POST" id="update_user">
                  
                  <div class="form-group">
                    <label for="fname"> First Name:</label>
                    <input type="text" class="form-control" id="update_fname" placeholder="Enter First name" name="fname" required>
                  </div>
                  <div class="form-group">
                      <label for="lname"> Last Name:</label>
                      <input type="text" class="form-control" id="update_lname" placeholder="Enter Last name" name="lname" required>
                    </div>
                  <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="text" class="form-control" id="update_email" placeholder="Enter Email" name="email">
                  </div>
                  <div class="form-group">
                    <label for="phone">Phone:</label>
                    <input type="email" class="form-control" id="update_phone" placeholder="Enter phone" name="phone">
                  </div>
                </form>
              </div>
                    </div>

                    <!-- Modal footer -->
                    <div class="modal-footer">
                      <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                      <button type="submit" id="update_table" class="btn btn-primary">update</button>
                    </div>
              
                  </div>
                </div>
              </div>
        </div>
        <script type="text/javascript">
        </script>
        <script type="text/javascript" src="js/formjs.js"></script>
        
    </body>
    
    
</html>
